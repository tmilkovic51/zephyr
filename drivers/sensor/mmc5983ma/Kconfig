# Copyright (c) 2022 Byte Lab d.o.o. <dev@byte-lab.com>
# SPDX-License-Identifier: Apache-2.0

menuconfig MMC5983MA
	bool "MMC5983MA magnetometer"
	depends on SPI
	help
	  Enable driver for MMC5983MA SPI-based magnetometer.

if MMC5983MA

choice MMC5983MA_TRIGGER_MODE
	prompt "Trigger mode"
	default MMC5983MA_TRIGGER_NONE
	help
	  Specify the type of triggering to be used by the driver.

config MMC5983MA_TRIGGER_NONE
	bool "No trigger"

config MMC5983MA_TRIGGER_GLOBAL_THREAD
	bool "Use global thread"
	depends on GPIO
	select MMC5983MA_TRIGGER

config MMC5983MA_TRIGGER_OWN_THREAD
	bool "Use own thread"
	depends on GPIO
	select MMC5983MA_TRIGGER

endchoice # MMC5983MA_TRIGGER_MODE

config MMC5983MA_TRIGGER
	bool

config MMC5983MA_THREAD_PRIORITY
	int "Thread priority"
	depends on MMC5983MA_TRIGGER_OWN_THREAD
	default 10
	help
	  Priority of thread used by the driver to handle interrupts.

config MMC5983MA_THREAD_STACK_SIZE
	int "Thread stack size"
	depends on MMC5983MA_TRIGGER_OWN_THREAD
	default 1024
	help
	  Stack size of thread used by the driver to handle interrupts.

choice MMC5983MA_ODR
	prompt "Output data rate"
	default MMC5983MA_ODR_50_HZ
	help
	  Magnetometer output data rate expressed in Hz.

config MMC5983MA_ODR_1_HZ
	bool "1 Hz"

	config MMC5983MA_ODR_10_HZ
	bool "10 Hz"

config MMC5983MA_ODR_20_HZ
	bool "20 Hz"

config MMC5983MA_ODR_50_HZ
	bool "50 Hz"

config MMC5983MA_ODR_100_HZ
	bool "100 Hz"

config MMC5983MA_ODR_200_HZ
	bool "200 Hz"

config MMC5983MA_ODR_1000_HZ
	bool "1000 Hz"

endchoice # MMC5983MA_ODR

choice MMC5983MA_PRD_SET
	prompt "Periodic SET frequency"
	default MMC5983MA_PRD_SET_EVERY_1000_SAMPLES
	help
	  This configuration determines how often the chip will do a SET operation.
	  The SET operation restores the sensor characteristics after it has been
	  influenced by a strong magnetic field (> 10 Gauss).
	  The SET operation will be done after every Nth measurement (N is one of options below).
	  For more info about the SET operation, consult device datasheet.

config MMC5983MA_PRD_SET_EVERY_1_SAMPLE
	bool "After every neasurement"

config MMC5983MA_PRD_SET_EVERY_25_SAMPLES
	bool "After every 25 measurements"

config MMC5983MA_PRD_SET_EVERY_75_SAMPLES
	bool "After every 75 measurements"

config MMC5983MA_PRD_SET_EVERY_100_SAMPLES
	bool "After every 100 measurements"

config MMC5983MA_PRD_SET_EVERY_250_SAMPLES
	bool "After every 250 measurements"

config MMC5983MA_PRD_SET_EVERY_500_SAMPLES
	bool "After every 500 measurements"

config MMC5983MA_PRD_SET_EVERY_1000_SAMPLES
	bool "After every 1000 measurements"

config MMC5983MA_PRD_SET_EVERY_2000_SAMPLES
	bool "After every 2000 measurements"

endchoice # MMC5983MA_PRD_SET

endif # MMC5983MA
